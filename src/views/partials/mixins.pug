mixin clipboard( text )
	span( data-clipboard-text=text, title="Click to copy" ).clipboard=text

mixin email( address )
	a( href="mailto:" + address )=address

mixin fulldate( date )
	time( datetime=moment( date ).toISOString(), title=moment( date ).format( 'DD/MM/YYYY HH:mm:ss ZZ' ) )=moment( date ).format( 'DD/MM/YYYY HH:mm' )

mixin relative( date )
	time( datetime=moment( date ).toISOString(), title=moment( date ).format( 'DD/MM/YYYY HH:mm:ss ZZ' ) )=moment( date ).fromNow()

mixin messageBlock( status, text )
	p( style="padding: 1em; margin-top: 1em;" class="bg-" + status )=text

mixin item( name, id )
	if name
		a( href=`/items/${id}` title=`View item: ${name}`  )=name
		|  
		small: a( href=`/items/${id}/edit` title=`Edit item: ${name}` ).text-muted
			span.glyphicon.glyphicon-pencil
	else
		| &mdash;

mixin user( name, id )
	if name
		a( href=`/users/${id}` title=`View user: ${name}`  )=name
		|  
		small: a( href=`/users/${id}/edit` title=`Edit user: ${name}` ).text-muted
			span.glyphicon.glyphicon-pencil
	else
		| &mdash;

mixin course( name, id )
	if name
		
			a( href=`/users/?course=${id}` title=`View users in course: ${name}`  )=name
			|  
			small: a( href=`/courses/${id}/edit` title=`Edit course: ${name}` ).text-muted
				span.glyphicon.glyphicon-pencil
	else
		| &mdash;

mixin year( name, id )
	if name
		a( href=`/users/?year=${id}` title=`View users in year: ${name}`  )=name
		|  
		small: a( href=`/years/${id}/edit` title=`Edit year: ${name}` ).text-muted
			span.glyphicon.glyphicon-pencil
	else
		| &mdash;

mixin location( name, id )
	if name
		a( href=`/items/?location=${id}` title=`View items in location: ${name}`  )=name
		|  
		small: a( href=`/locations/${id}/edit` title=`Edit location: ${name}` ).text-muted
			span.glyphicon.glyphicon-pencil
	else
		| &mdash;
		
mixin department( name, id )
	if name
		a( href=`/items/?department=${id}` title=`View items in department: ${name}`  )=name
		|  
		small: a( href=`/departments/${id}/edit` title=`Edit department: ${name}` ).text-muted
			span.glyphicon.glyphicon-pencil
	else
		| &mdash;
		
mixin group( name, id )
	if name
		a( href=`/items/?group=${id}` title=`View items in group: ${name}`  )=name
		|  
		small: a( href=`/groups/${id}/edit` title=`Edit group: ${name}` ).text-muted
			span.glyphicon.glyphicon-pencil
	else
		| &mdash;

mixin btn( size, colour, icon, text, url )
	a( href=url, class='btn-' + size, class='btn-' + colour ).btn
		span.glyphicon( class='glyphicon-' + icon )
		if text
			|  #{ text }

mixin labelBtn( url )
	+btn( 'xs', 'default', 'print', 'Label', url )

mixin compactLabelBtn( url )
	+btn( 'xs', 'default', 'print', '', url )

mixin editBtn( url )
	+btn( 'xs', 'primary', 'pencil', 'Edit', url )

mixin compactEditBtn( url )
	+btn( 'xs', 'primary', 'pencil', '', url )

mixin deleteBtn( url )
	+btn( 'xs', 'danger', 'trash', 'Delete', url )

mixin compactDeleteBtn( url )
	+btn( 'xs', 'danger', 'trash', '', url )

mixin space
	|  

mixin sortItemHead( text, slug, sort_by, sort_dir, selected, filter_path )
	- sort_by = sort_by.split('_')[0]
	if ( sort_by == slug )
		if sort_dir == 'asc'
			- alt_dir = 'desc'
		else
			- alt_dir = 'asc'
		
		a( href=filter_path + '?status=' + ( selected && selected.status ? selected.status : '' ) + '&location=' + ( selected && selected.location ? selected.location : '' ) + '&department=' + ( selected && selected.department ? selected.department : '' ) + '&group=' + ( selected && selected.group ? selected.group : '' ) + '&course=' + ( selected && selected.course ? selected.course : '' ) + '&year=' + ( selected && selected.year ? selected.year : '' ) + '&sortby=' + slug + '&direction=' + alt_dir )
			| #{ text }
		span( class=( sort_dir == 'asc' ? 'dropup' : 'dropdown' ) )
			span.caret
	else
		a( href=filter_path + '?status=' + ( selected && selected.status ? selected.status : '' ) + '&location=' + ( selected && selected.location ? selected.location : '' ) + '&department=' + ( selected && selected.department ? selected.department : '' ) + '&group=' + ( selected && selected.group ? selected.group : '' ) + '&course=' + ( selected && selected.course ? selected.course : '' ) + '&year=' + ( selected && selected.year ? selected.year : '' ) + '&sortby=' + slug + '&direction=asc' )
			| #{ text }

mixin sortUserHead( text, slug, sort_by, sort_dir, selected )
	if ( sort_by == slug )
		if sort_dir == 'asc'
			- alt_dir = 'desc'
		else
			- alt_dir = 'asc'
		
		a( href=filter_path + '?status=' + ( selected && selected.status ? selected.status : '' ) + '&course=' + ( selected && selected.course ? selected.course : '' ) + '&year=' + ( selected && selected.year ? selected.year : '' ) + '&sortby=' + slug + '&direction=' + alt_dir )
			| #{ text }
		span( class=( sort_dir == 'asc' ? 'dropup' : 'dropdown' ) )
			span.caret
	else
		a( href=filter_path + '?status=' + ( selected && selected.status ? selected.status : '' ) + '&course=' + ( selected && selected.course ? selected.course : '' ) + '&year=' + ( selected && selected.year ? selected.year : '' ) + '&sortby=' + slug + '&direction=asc' )
			| #{ text }

mixin status( status )
	if status == 'available'
		span.label.label-success Available
	else if status == 'returned'
		span.label.label-success Returned
	else if status == 'found'
		span.label.label-success Found
	else if status == 'repaired'
		span.label.label-success Repaired
	else if status == 'on-loan'
		span.label.label-danger On Loan
	else if status == 'broken'
		span.label.label-warning Broken
	else if status == 'lost'
		span.label.label-warning Lost
	else if status == 'issued'
		span.label.label-danger Issued
	else if status == 'audited'
		span.label.label-default Audited
	else if status == 'reserve'
		span.label.label-danger Reserve
	else if status == 'maintenance'
		span.label.label-primary Maintenance
	else
		span.label.label-info=status

mixin statusPill( status )
	if status == 'available'
		span.label.label-success(title='Available') &nbsp;
	else if status == 'returned'
		span.label.label-success(title='Returned') &nbsp;
	else if status == 'found'
		span.label.label-success(title='Found') &nbsp;
	else if status == 'repaired'
		span.label.label-success(title='Repaired') &nbsp;
	else if status == 'on-loan'
		span.label.label-danger(title='On Loan') &nbsp;
	else if status == 'broken'
		span.label.label-warning(title='Broken') &nbsp;
	else if status == 'lost'
		span.label.label-warning(title='Lost') &nbsp;
	else if status == 'issued'
		span.label.label-danger(title='Issued') &nbsp;
	else if status == 'audited'
		span.label.label-default(title='Audited') &nbsp;
	else if status == 'reserve'
		span.label.label-danger(title='Reserve') &nbsp;
	else if status == 'maintenance'
		span.label.label-primary(title='Maintenance') &nbsp;
	else
		span.label.label-info(title='status') &nbsp;
